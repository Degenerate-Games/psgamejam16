[gd_scene load_steps=12 format=3 uid="uid://46sktqtu1pmy"]

[ext_resource type="Script" path="res://scripts/base.gd" id="1_pol5s"]
[ext_resource type="Material" uid="uid://dvahnnurtg7d3" path="res://materials/pestMat.tres" id="2_bf0oq"]
[ext_resource type="ArrayMesh" uid="uid://b2y5u3qarp66o" path="res://models/pestBase.obj" id="3_jk8bk"]
[ext_resource type="PackedScene" uid="uid://d2pf8pqkev1q1" path="res://scenes/components/hitbox_component.tscn" id="4_anp3o"]
[ext_resource type="PackedScene" uid="uid://bq8g11gl1b8h7" path="res://scenes/components/health_component.tscn" id="5_oxp7i"]
[ext_resource type="PackedScene" uid="uid://bcdl5v6f1hbfc" path="res://scenes/units/enemy/pestBug.tscn" id="7_lwpif"]
[ext_resource type="PackedScene" uid="uid://d35ye1a8215q4" path="res://scenes/components/spawner_component.tscn" id="14_dcrje"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_kqe6k"]
data = PackedVector3Array(0, 0.2, -0.96, 0.6788, 0.2, -0.6788, -0.6788, 0.2, -0.6788, -0.6788, 0.2, -0.6788, 0.6788, 0.2, -0.6788, -0.96, 0.2, 0, -0.96, 0.2, 0, 0.6788, 0.2, -0.6788, -0.6788, 0.2, 0.6788, -0.6788, 0.2, 0.6788, 0.6788, 0.2, -0.6788, 0, 0.2, 0.96, 0, 0.2, 0.96, 0.6788, 0.2, -0.6788, 0.6788, 0.2, 0.6788, 0.6788, 0.2, 0.6788, 0.6788, 0.2, -0.6788, 0.96, 0.2, 0, 0, 0.275, -1.1, 0, -0.275, -1.87, 0.7778, 0.275, -0.7778, 0.7778, 0.275, -0.7778, 0, -0.275, -1.87, 1.3223, -0.275, -1.3223, 0.7778, 0.275, -0.7778, 1.3223, -0.275, -1.3223, 1.1, 0.275, 0, 1.1, 0.275, 0, 1.3223, -0.275, -1.3223, 1.87, -0.275, 0, 1.1, 0.275, 0, 1.87, -0.275, 0, 0.7778, 0.275, 0.7778, 0.7778, 0.275, 0.7778, 1.87, -0.275, 0, 1.3223, -0.275, 1.3223, 0.7778, 0.275, 0.7778, 1.3223, -0.275, 1.3223, 0, 0.275, 1.1, 0, 0.275, 1.1, 1.3223, -0.275, 1.3223, 0, -0.275, 1.87, 0, 0.275, 1.1, 0, -0.275, 1.87, -0.7778, 0.275, 0.7778, -0.7778, 0.275, 0.7778, 0, -0.275, 1.87, -1.3223, -0.275, 1.3223, -0.7778, 0.275, 0.7778, -1.3223, -0.275, 1.3223, -1.1, 0.275, 0, -1.1, 0.275, 0, -1.3223, -0.275, 1.3223, -1.87, -0.275, 0, 1.1, 0.275, 0, 0.7778, 0.275, 0.7778, 0.88, 0.175, 0, 0.88, 0.175, 0, 0.7778, 0.275, 0.7778, 0.6222, 0.175, 0.6222, -1.1, 0.275, 0, -1.87, -0.275, 0, -0.7778, 0.275, -0.7778, -0.7778, 0.275, -0.7778, -1.87, -0.275, 0, -1.3223, -0.275, -1.3223, -0.7778, 0.275, -0.7778, -1.3223, -0.275, -1.3223, 0, 0.275, -1.1, 0, 0.275, -1.1, -1.3223, -0.275, -1.3223, 0, -0.275, -1.87, -0.7778, 0.275, 0.7778, -1.1, 0.275, 0, -0.6223, 0.175, 0.6222, -0.6223, 0.175, 0.6222, -1.1, 0.275, 0, -0.88, 0.175, 0, 0.7778, 0.275, 0.7778, 0, 0.275, 1.1, 0.6222, 0.175, 0.6222, 0.6222, 0.175, 0.6222, 0, 0.275, 1.1, 0, 0.175, 0.88, -1.1, 0.275, 0, -0.7778, 0.275, -0.7778, -0.88, 0.175, 0, -0.88, 0.175, 0, -0.7778, 0.275, -0.7778, -0.6223, 0.175, -0.6223, 0.7778, 0.275, -0.7778, 1.1, 0.275, 0, 0.6222, 0.175, -0.6223, 0.6222, 0.175, -0.6223, 1.1, 0.275, 0, 0.88, 0.175, 0, 0, 0.275, 1.1, -0.7778, 0.275, 0.7778, 0, 0.175, 0.88, 0, 0.175, 0.88, -0.7778, 0.275, 0.7778, -0.6223, 0.175, 0.6222, -0.7778, 0.275, -0.7778, 0, 0.275, -1.1, -0.6223, 0.175, -0.6223, -0.6223, 0.175, -0.6223, 0, 0.275, -1.1, 0, 0.175, -0.88, 0, 0.275, -1.1, 0.7778, 0.275, -0.7778, 0, 0.175, -0.88, 0, 0.175, -0.88, 0.7778, 0.275, -0.7778, 0.6222, 0.175, -0.6223, 1.8279, -0.1046, -1.5257, 1.8279, -0.1046, -0.4743, 1.3162, 0.6487, -1, 1.8279, -0.1046, -0.4743, 1.1208, -0.8117, -0.1494, 0.8792, 0.2117, -0.1494, 1.1208, -0.8117, -1.8506, 1.8279, -0.1046, -1.5257, 0.8792, 0.2117, -1.8506, 1.3162, 0.6487, -1, 1.8279, -0.1046, -0.4743, 0.8792, 0.2117, -0.1494, 0.8792, 0.2117, -1.8506, 1.8279, -0.1046, -1.5257, 1.3162, 0.6487, -1, 1.3162, 0.6487, -1, 0.8792, 0.2117, -0.1494, 0.2929, 0.4071, -1, 0.8792, 0.2117, -0.1494, 0.1721, -0.4954, -0.4743, 0.2929, 0.4071, -1, 0.1721, -0.4954, -0.4743, 0.1721, -0.4954, -1.5257, 0.2929, 0.4071, -1, 0.1721, -0.4954, -1.5257, 0.8792, 0.2117, -1.8506, 0.2929, 0.4071, -1, 0.8792, 0.2117, -1.8506, 1.3162, 0.6487, -1, 0.2929, 0.4071, -1, -0.2031, -0.7061, -0.5528, -1, -0.3, 0, -0.3676, 0.3324, -0.5528, -0.3676, 0.3324, -0.5528, -1, -0.3, 0, -1.4061, 0.4969, -0.5528, -1.4061, 0.4969, -0.5528, -1, -0.3, 0, -1.8835, -0.4399, -0.5528, -0.2031, -0.7061, -0.5528, -0.3676, 0.3324, -0.5528, -0.1166, -0.1601, -1.4473, -0.3676, 0.3324, -0.5528, -1.4061, 0.4969, -0.5528, -0.8601, 0.5834, -1.4473, -1.4061, 0.4969, -0.5528, -1.8835, -0.4399, -0.5528, -1.797, 0.1061, -1.4473, -0.1166, -0.1601, -1.4473, -0.3676, 0.3324, -0.5528, -0.8601, 0.5834, -1.4473, -0.8601, 0.5834, -1.4473, -1.4061, 0.4969, -0.5528, -1.797, 0.1061, -1.4473, -0.1166, -0.1601, -1.4473, -0.8601, 0.5834, -1.4473, -1, -0.3, -2, -0.8601, 0.5834, -1.4473, -1.797, 0.1061, -1.4473, -1, -0.3, -2, -1.688, -0.2445, 1.7236, -1.9178, -0.0147, 0.7236, -1.2853, 0.6177, 1.2764, -1.9178, -0.0147, 0.7236, -1.3162, -0.6162, 0.1056, -1.0556, 0.388, 0.2763, -0.6838, 0.0162, 1.8944, -1.688, -0.2445, 1.7236, -1.2853, 0.6177, 1.2764, -1.2853, 0.6177, 1.2764, -1.9178, -0.0147, 0.7236, -1.0556, 0.388, 0.2763, -1.0556, 0.388, 0.2763, -1.3162, -0.6162, 0.1056, -0.312, -0.3555, 0.2763, -0.6838, 0.0162, 1.8944, -1.2853, 0.6177, 1.2764, -0.2929, 0.4071, 1, -1.2853, 0.6177, 1.2764, -1.0556, 0.388, 0.2763, -0.2929, 0.4071, 1, -1.0556, 0.388, 0.2763, -0.312, -0.3555, 0.2763, -0.2929, 0.4071, 1, -0.312, -0.3555, 0.2763, -0.0823, -0.5853, 1.2764, -0.2929, 0.4071, 1, -0.0823, -0.5853, 1.2764, -0.6838, 0.0162, 1.8944, -0.2929, 0.4071, 1, 1.8833, -0.4399, 1.4472, 1, -0.3, 2, 1.406, 0.4969, 1.4472, 1.406, 0.4969, 1.4472, 1, -0.3, 2, 0.3675, 0.3324, 1.4472, 0.3675, 0.3324, 1.4472, 1, -0.3, 2, 0.203, -0.7061, 1.4472, 1.8833, -0.4399, 1.4472, 1.406, 0.4969, 1.4472, 1.7969, 0.1061, 0.5528, 1.406, 0.4969, 1.4472, 0.3675, 0.3324, 1.4472, 0.86, 0.5834, 0.5528, 0.3675, 0.3324, 1.4472, 0.203, -0.7061, 1.4472, 0.1166, -0.1601, 0.5528, 1.7969, 0.1061, 0.5528, 1.406, 0.4969, 1.4472, 0.86, 0.5834, 0.5528, 0.86, 0.5834, 0.5528, 0.3675, 0.3324, 1.4472, 0.1166, -0.1601, 0.5528, 1.7969, 0.1061, 0.5528, 0.86, 0.5834, 0.5528, 1, -0.3, 0, 0.86, 0.5834, 0.5528, 0.1166, -0.1601, 0.5528, 1, -0.3, 0, 2.2571, -0.1046, 0.4136, 1.5136, -0.1046, 1.1571, 1.5236, 0.6487, 0.4236, 1.5136, -0.1046, 1.1571, 0.7839, -0.8117, 0.8869, 0.6131, 0.2117, 0.716, 1.9868, -0.8117, -0.3161, 2.2571, -0.1046, 0.4136, 1.816, 0.2117, -0.4869, 1.5236, 0.6487, 0.4236, 1.5136, -0.1046, 1.1571, 0.6131, 0.2117, 0.716, 1.816, 0.2117, -0.4869, 2.2571, -0.1046, 0.4136, 1.5236, 0.6487, 0.4236, 1.5236, 0.6487, 0.4236, 0.6131, 0.2117, 0.716, 0.8, 0.4071, -0.3, 0.6131, 0.2117, 0.716, 0.3428, -0.4954, -0.0137, 0.8, 0.4071, -0.3, 0.3428, -0.4954, -0.0137, 1.0863, -0.4954, -0.7572, 0.8, 0.4071, -0.3, 1.0863, -0.4954, -0.7572, 1.816, 0.2117, -0.4869, 0.8, 0.4071, -0.3, 1.816, 0.2117, -0.4869, 1.5236, 0.6487, 0.4236, 0.8, 0.4071, -0.3, 1.1208, -0.8117, -0.1494, 1.8279, -0.1046, -0.4743, 1.8279, -0.1046, -1.5257, 1.5136, -0.1046, 1.1571, 2.2571, -0.1046, 0.4136, 1.9868, -0.8117, -0.3161, 1.8833, -0.4399, 1.4472, 1.7969, 0.1061, 0.5528, 1, -0.3, 0, -1.688, -0.2445, 1.7236, -0.6838, 0.0162, 1.8944, -0.0823, -0.5853, 1.2764, -1.3162, -0.6162, 0.1056, -1.9178, -0.0147, 0.7236, -1.688, -0.2445, 1.7236, -2.5266, -0.2445, 0.2252, -1.9819, -0.0147, -0.6444, -1.9256, 0.6177, 0.1937, -1.9819, -0.0147, -0.6444, -1.1196, -0.6162, -0.6561, -1.0561, 0.388, -0.3509, -2.5266, -0.2445, 0.2252, -1.9373, 0.0162, 1.056, -1.075, -0.5853, 1.0444, -1.1196, -0.6162, -0.6561, -1.9819, -0.0147, -0.6444, -2.5266, -0.2445, 0.2252, -1.9373, 0.0162, 1.056, -2.5266, -0.2445, 0.2252, -1.9256, 0.6177, 0.1937, -1.9256, 0.6177, 0.1937, -1.9819, -0.0147, -0.6444, -1.0561, 0.388, -0.3509, -1.0561, 0.388, -0.3509, -1.1196, -0.6162, -0.6561, -0.5303, -0.3555, 0.1748, -1, -0.3, -2, -1.797, 0.1061, -1.4473, -1.8835, -0.4399, -0.5528, 1.1208, -0.8117, -1.8506, 0.8792, 0.2117, -1.8506, 0.1721, -0.4954, -1.5257, -1.9373, 0.0162, 1.056, -1.9256, 0.6177, 0.1937, -1.0285, 0.4071, 0.7, -1.9256, 0.6177, 0.1937, -1.0561, 0.388, -0.3509, -1.0285, 0.4071, 0.7, -1.0561, 0.388, -0.3509, -0.5303, -0.3555, 0.1748, -1.0285, 0.4071, 0.7, -0.5303, -0.3555, 0.1748, -1.075, -0.5853, 1.0444, -1.0285, 0.4071, 0.7, -1.075, -0.5853, 1.0444, -1.9373, 0.0162, 1.056, -1.0285, 0.4071, 0.7, 1.1208, -0.8117, -0.1494, 1.8279, -0.1046, -1.5257, 1.1208, -0.8117, -1.8506, -0.2031, -0.7061, -0.5528, -0.1166, -0.1601, -1.4473, -1, -0.3, -2, -0.2031, -0.7061, -0.5528, -1, -0.3, -2, -1.8835, -0.4399, -0.5528, 1.9868, -0.8117, -0.3161, 1.816, 0.2117, -0.4869, 1.0863, -0.4954, -0.7572)

[sub_resource type="Curve3D" id="Curve3D_ux5ql"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 25, 0, 0, 0, 0, 0, 0, 0, 0, 17.675, 0, 17.675, 0, 0, 0, 0, 0, 0, 0, 0, 25, 0, 0, 0, 0, 0, 0, -17.675, 0, 17.675, 0, 0, 0, 0, 0, 0, -25, 0, 0, 0, 0, 0, 0, 0, 0, -17.675, 0, -17.675, 0, 0, 0, 0, 0, 0, 0, 0, -25, 0, 0, 0, 0, 0, 0, 17.675, 0, -17.675, 0, 0, 0, 0, 0, 0, 25, 0, 0),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 9

[sub_resource type="CylinderShape3D" id="CylinderShape3D_mhkc5"]
height = 2.5
radius = 6.46688

[sub_resource type="ViewportTexture" id="ViewportTexture_uyrb3"]
viewport_path = NodePath("SubViewport")

[node name="EnemyBase" type="StaticBody3D" node_paths=PackedStringArray("health_component", "spawner_component")]
collision_layer = 16
collision_mask = 2
script = ExtResource("1_pol5s")
health_component = NodePath("HealthComponent")
spawner_component = NodePath("SpawnerComponent")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(2.2, 0, 0, 0, 2.2, 0, 0, 0, 2.2, 0, 0, 0)
material_override = ExtResource("2_bf0oq")
mesh = ExtResource("3_jk8bk")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(2.2, 0, 0, 0, 2.2, 0, 0, 0, 2.2, 0, 0, 0)
shape = SubResource("ConcavePolygonShape3D_kqe6k")

[node name="Path3D" type="Path3D" parent="."]
curve = SubResource("Curve3D_ux5ql")

[node name="HitboxComponent" parent="." node_paths=PackedStringArray("health_component") groups=["base_navigation_mesh_source_group", "enemy_base"] instance=ExtResource("4_anp3o")]
collision_layer = 16
collision_mask = 2
health_component = NodePath("../HealthComponent")

[node name="CollisionShape3D" type="CollisionShape3D" parent="HitboxComponent"]
shape = SubResource("CylinderShape3D_mhkc5")

[node name="HealthComponent" parent="." instance=ExtResource("5_oxp7i")]
transform = Transform3D(2.5, 0, 0, 0, -1.09278e-07, 2.5, 0, -2.5, -1.09278e-07, 0, 0, 0)
texture = SubResource("ViewportTexture_uyrb3")
base_health = 50.0
health_color = Color(0.468243, 0.328536, 0.220185, 1)
base_heal_rate = 2.0

[node name="SpawnerComponent" parent="." instance=ExtResource("14_dcrje")]
spawn_object = ExtResource("7_lwpif")

[connection signal="input_event" from="." to="." method="_on_input_event"]
[connection signal="can_heal" from="HealthComponent" to="." method="_on_health_component_can_heal"]
[connection signal="object_spawned" from="SpawnerComponent" to="." method="_on_spawner_component_object_spawned"]
